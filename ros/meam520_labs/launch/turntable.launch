<?xml version="1.0"?>
<launch>

  <!-- LAZY SUSAN TURNTABLE -->

  <arg name="table_height" default=".2" />
  <arg name="control_delay" default="5"/>

  <param name="robot_description" command="$(find xacro)/xacro $(find meam520_labs)/urdf/turntable.xacro" />

  <rosparam command="load" file="$(find meam520_labs)/config/turntable_controller.yaml" />

  <!-- Spawn a turntable into Gazebo -->
  <node name="spawn_table" pkg="gazebo_ros" type="spawn_model" args="-param robot_description -urdf -model turntable
  -x 0 -y 0 -z $(arg table_height)
  -R 0 -P 0 -Y 0
  -robot_namespace turntable
  " />

  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen" />

    <!-- joint_velocity_controller -->



  <!-- <node pkg="rostopic" type="rostopic" name="fake_joint_calibration"
    args="pub /turntable/calibrated std_msgs/Bool true" /> -->

  <!-- <node name="turntable_controller_manager" pkg="controller_manager" type="controller_manager" respawn="false" /> -->


  <node name="turntable_controller_spawner" pkg="controller_manager" type="spawner"
    output="screen" respawn="false" args="turntable/turntable_controller"/>

<!-- launch-prefix="bash -c 'sleep $(arg control_delay); $0 $@' "  -->

    <!-- args="- -wait-for=/turntable/calibrated turntable_controller" -->

<!--
         args="spawn turntable/turntable_controller"
        launch-prefix="bash -c 'sleep $(arg control_delay); $0 $@' " /> -->


  <!-- <node name="spin_turntable"
        pkg="rostopic"
        type="rostopic"
        launch-prefix="bash -c 'sleep $(arg spin_delay); $0 $@' "
        args="pub /turntable/turntable/turntable_controller/command std_msgs/Float64 $(arg speed) -r 1"/> -->


</launch>
